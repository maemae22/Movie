<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.movie.mapper.MovieMapper">
    <insert id="insertDailyMovie" parameterType="com.example.movie.dto.DailyMovieDTO">
        INSERT INTO DAILY_BOXOFFICE
            (movie_cd, movie_nm, open_dt, movie_rank, audi_acc)
        VALUES
            (#{movieCd},#{movieNm},#{openDt},#{movieRank},#{audiAcc})
    </insert>

    <select id="selectMovieName" resultType="com.example.movie.dto.DailyMovieDTO" parameterType="Long">
        SELECT
            movie_nm
        FROM
            DAILY_BOXOFFICE
        WHERE
            id = #{movie_id}
    </select>

    <insert id="insertMovieDetail" parameterType="com.example.movie.dto.MovieDTO">
        INSERT IGNORE INTO MOVIE_DETAIL
            (movie_cd, movie_nm, movie_nm_en, showtime,
             open_dt, type_nm, nation_nm, genre_nm,
             director_nm, director_nm_en, company_nm, watch_grade_nm,
             actor_nm, actor_nm_en)
        VALUES
            ( #{movieCd}, #{movieNm}, #{movieNmEn}, #{showtime},
             #{openDt}, #{typeNm}, #{nationNm}, #{genreNm},
             #{directorNm}, #{directorNmEn}, #{companyNm}, #{watchGradeNm},
             #{actorNm}, #{actorNmEn})
    </insert>

    <select id="selectDailyMovieCode" resultType="HashMap">
        SELECT DISTINCT
            movie_cd
        FROM
            DAILY_BOXOFFICE
    </select>

    <select id="selectDateInsertChk" resultType="Integer">
        SELECT 1
        FROM DAILY_BOXOFFICE
        WHERE indate = current_date
            limit 1;
    </select>
    <select id="selectMovieNameComment" resultType="com.example.movie.dto.DailyMovieDTO" parameterType="Long">
        SELECT
            movie_nm
        FROM
            DAILY_BOXOFFICE
        WHERE
            id = #{movie_id}
    </select>
</mapper>